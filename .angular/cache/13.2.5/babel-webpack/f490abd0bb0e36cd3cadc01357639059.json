{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { FormControl } from '@angular/forms';\nlet LabelDialogComponent = class LabelDialogComponent {\n  constructor(ngxCsvParser, studyService, modelService) {\n    this.ngxCsvParser = ngxCsvParser;\n    this.studyService = studyService;\n    this.modelService = modelService;\n    this.fileName = '';\n    this.header = true;\n    this.idsInCSV = 0;\n    this.idsInDB = 0;\n    this.keyBreakdown = [];\n    this.modelFormControl = new FormControl();\n    this.models$ = this.modelService.getModels();\n    this.models = [];\n    this.fileSize = 0;\n    this.maxFileSize = 2000000;\n  }\n\n  ngOnInit() {\n    this.models$.subscribe(m => this.models = m);\n    this.modelFormControl.valueChanges.subscribe(fc => {\n      this.selectedModel = this.models.find(m => m.id == fc);\n      console.log(this.selectedModel, fc);\n    });\n  }\n\n  onFileSelected(event) {\n    console.log(event);\n    let csv = event.target.files[0];\n    this.csv = csv;\n    this.fileName = csv.name;\n    this.fileSize = csv.size;\n\n    if (this.fileSize > this.maxFileSize) {\n      alert('file to large to preview');\n      return;\n    }\n\n    this.studyService.checkForSeriesUID(csv, this.selectedModel.id).subscribe(r => this.fileStats = r);\n    this.ngxCsvParser.parse(csv, {\n      header: this.header,\n      delimiter: ','\n    }).subscribe(r => {\n      this.labels = r;\n    });\n  }\n\n  onSave() {\n    this.studyService.saveLabels(this.csv, this.selectedModel.id).subscribe(r => console.log(r));\n  }\n\n};\nLabelDialogComponent = __decorate([Component({\n  selector: 'app-label-dialog',\n  templateUrl: './label-dialog.component.html',\n  styleUrls: ['./label-dialog.component.scss']\n})], LabelDialogComponent);\nexport { LabelDialogComponent };","map":null,"metadata":{},"sourceType":"module"}