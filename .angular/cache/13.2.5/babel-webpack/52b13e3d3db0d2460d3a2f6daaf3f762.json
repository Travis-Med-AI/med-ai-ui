{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, ViewChild } from '@angular/core';\nimport { FormControl } from '@angular/forms';\nimport { Notifications } from 'med-ai-common';\nimport { LabelDialogComponent } from '../label-dialog/label-dialog.component';\nimport { NgxMasonryComponent } from 'ngx-masonry';\nlet StudiesComponent = class StudiesComponent {\n  constructor(modelService, studyService, notificationService, dialog) {\n    this.modelService = modelService;\n    this.studyService = studyService;\n    this.notificationService = notificationService;\n    this.dialog = dialog;\n    this.studies = [];\n    this.models$ = this.modelService.getModels();\n    this.displayedColumns = [];\n    this.totalStudies = 0;\n    this.searchControl = new FormControl('');\n    this.pageIndex = 0;\n    this.pageSize = 10;\n    this.totalVisible = 30;\n    this.masonryConfig = {\n      // gutter: 1,\n      fitWidth: true,\n      horizontalOrder: true\n    };\n  }\n\n  ngOnInit() {\n    this.fetchStudies();\n    this.searchControl.valueChanges.subscribe(s => {\n      this.pageIndex = 0;\n      this.totalVisible = 30;\n      this.fetchStudies();\n    });\n    this.notificationService.watchNotificationTypes([Notifications.studyReady]).subscribe(n => this.fetchStudies());\n  }\n\n  fetchStudies() {\n    this.studyService.getStudies(this.pageIndex, this.totalVisible, this.searchControl.value).subscribe(studies => {\n      this.studies = studies.payload;\n      this.masonry.reloadItems();\n      this.masonry.layout();\n    });\n  }\n\n  onScrollDown() {\n    this.totalVisible += this.pageSize;\n    this.fetchStudies();\n  }\n\n  onScrollUp() {}\n\n  openAddLabels() {\n    const dialogRef = this.dialog.open(LabelDialogComponent, {});\n  }\n\n};\n\n__decorate([ViewChild(NgxMasonryComponent)], StudiesComponent.prototype, \"masonry\", void 0);\n\nStudiesComponent = __decorate([Component({\n  selector: 'app-studies',\n  templateUrl: './studies.component.html',\n  styleUrls: ['./studies.component.scss']\n})], StudiesComponent);\nexport { StudiesComponent };","map":null,"metadata":{},"sourceType":"module"}